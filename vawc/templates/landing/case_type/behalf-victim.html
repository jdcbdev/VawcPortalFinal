{% extends "../../base/base.html" %}
{% block title %}Behalf of Victim{% endblock %}
{% load static %}
{% block content %}
<div class="container-fluid py-4">
    <div class="row"> 
        <!--multisteps-form-->
        <div class="multisteps-form col-md-10 p-4 mx-auto">
            <!--progress bar-->
            <div class="row d-flex justify-content-center">
                <div class="col-12 col-lg-8 mx-auto my-1 my-md-4 mb-md-5">
                    <div class="multisteps-form__progress">
                        <button class="multisteps-form__progress-btn js-active" type="button" title="Victim-Survivor Info">Victim</button>
                        <button class="multisteps-form__progress-btn" type="button" title="Perpetrator Information" disabled>Perpetrator</button>
                        <button class="multisteps-form__progress-btn" type="button" title="Incident Information" disabled>Incident</button>
                        <button class="multisteps-form__progress-btn" type="button" title="Contact Person Information" disabled>Contact Person</button>
                        <button class="multisteps-form__progress-btn" type="button" title="Service Information" disabled>Service</button>
                    </div>
                </div>
            </div>
            {% comment %} <div class="row d-flex justify-content-center">
                <div class="col-12 col-lg-8 ml-auto mr-auto mb-4">
                <div class="multisteps-form__progress">
                    <button class="multisteps-form__progress-btn js-active" type="button" title="Victim-Survivor Info">Victim-Survivor Info</button>
                    <button class="multisteps-form__progress-btn" type="button" title="Perpetrator Information" disabled>Perpetrator Information</button>
                    <button class="multisteps-form__progress-btn" type="button" title="Incident Information" disabled>Incident Information</button>
                    <button class="multisteps-form__progress-btn" type="button" title="Contact Person Information" disabled>Contact Person Information</button>
                    <button class="multisteps-form__progress-btn" type="button" title="Service Information" disabled>Service Information</button>
                </div>
                </div>
            </div> {% endcomment %}
    
            <!--form panels-->
            <div class="row">
                <div class="">
                    <form class="multisteps-form__form" id="impact-victim-form" method="POST" action="{% url 'add_case' %}" enctype="multipart/form-data">
                    {% csrf_token %}
                        <input type="hidden" name="type_of_case" value="Behalf">
                        <input type="hidden" id="victim_count" name="victim_count" value="1">
                        <input type="hidden" id="perpetrator_count" name="perpetrator_count" value="1">
                        <input type="hidden" id="email-confirmed" name="email-confirmed">
                        <input type="hidden" id="phone-confirmed" name="phone-confirmed">
                        <!--single form panel--> <!--victim-->
                        <div class="multisteps-form__panel js-active" data-animation="slideVert">

                            <h2 class="text-center mb-4 mb-md-5"><strong>Victim Information</strong></h2>

                            <!--victims navigation tabs-->
                            <div class="col-md-11 mx-auto mb-2 d-flex flex-nowrap gap-2 overflow-auto nav nav-pills" id="victim-navtabs-container">
                                <div class="border rounded p-2 text-nowrap nav-link active d-flex align-items-center" data-toggle="tab" data-target="#victim-form_0">
                                    <i class="fa-solid fa-user me-1"></i>
                                    <span class="tab-name">
                                        Victim
                                    </span>
                                </div>
                                <button class="btn btn-outline-primary text-nowrap" id="add-victim-form" title="Add a new form"><i class="fa-solid fa-plus px-1"></i></button>
                            </div>
                            <div class="multisteps-form__content col-12 col-md-11 border rounded p-4 mx-auto">
                                
                                <div class="tab-content">
                                    <!--victim form-->
                                    <div class="tab-pane fade show active individual-form victim-form" id="victim-form_0">
                                        <div class="row">
                                            <div class="col-12 d-flex align-items-center mb-3">
                                                <h4 class="user_counter fw-bold border rounded py-1 px-3 text-muted " id="victim_counter">
                                                    1
                                                </h4>
                                                <button class="delete-individual-form btn btn-outline-danger ms-auto" type="button" title="Delete this form">
                                                    <i class="fa-solid fa-trash-can"></i>
                                                </button>
                                            </div>
                                            
                                            <div class="col-12 d-flex flex-column flex-md-row justify-content-md-between">
                                                <h3 class="fs-5 mb-3">Personal Information</h3>
                                                <div class="fw-light mb-3">Fields with <span class="required"></span> are required</div>
                                            </div>
                                            <div class="col-sm-6 mb-3"> <!--firstname-->
                                                <label for="victim-firstname_0" class="form-label">First Name <span class="required"></span></label>
                                                <input type="text" class="form-control req-inp" id="victim-firstname_0" name="victim-firstname_0">
                                                <div class="invalid-feedback victim-firstname_0" ></div>
                                            </div>
                                            <div class="col-sm-6 mb-3"> <!--middlename-->
                                                <label for="victim-middlename_0" class="form-label">Middle</label>
                                                <input type="text" class="form-control" id="victim-middlename_0" name="victim-middlename_0">
                                                <div class="invalid-feedback victim-middlename_0"></div>
                                            </div>
                                            <div class="col-sm-6 mb-3"> <!--lastname-->
                                                <label for="victim-lastname_0" class="form-label">Last Name <span class="required"></span></label>
                                                <input type="text" class="form-control req-inp victim-lastname" id="victim-lastname_0" name="victim-lastname_0">
                                                <div class="invalid-feedback victim-lastname_0"></div>
                                            </div>
                                            <div class="col-sm-6 mb-3"> <!--suffix-->
                                                <label for="victim-Suffix_0" class="form-label">Suffix</label>
                                                <select id="victim-Suffix_0" name="victim-Suffix_0" class="form-select">
                                                    <option value="none">N/A</option>
                                                    <option value="sr">Sr</option>
                                                    <option value="jr">Jr</option>
                                                    <option value="ii">II</option>
                                                    <option value="iii">III</option>
                                                    <option value="iv">IV</option>
                                                </select>
                                            </div>
                                            <div class="col-sm-6 mb-3"> <!--gender-->
                                                <label for="victim-sex_0" class="form-label">Gender <span class="required"></span></label>
                                                <select id="victim-sex_0" name="victim-sex_0" class="form-select req-inp gender-input">
                                                    <option value="">--Select Option--</option>
                                                    <option value="male">Male</option>
                                                    <option value="female">Female</option>
                                                    <option value="rather_not_say">Rather not say</option>
                                                    <option>Custom</option>
                                                </select>
                                                <div class="invalid-feedback victim-sex_0"></div>
                                                <input type="text" class="form-control mt-2 custom-gender" placeholder="Specify" style="display: none;">
                                            </div>
                                            <div class="col-sm-6 mb-3"> <!--date of birth-->
                                                <label for="victim-date-of-birth_0" class="form-label">Date of Birth <span class="required"></span></label>
                                                <input type="date" class="form-control req-inp" id="victim-date-of-birth_0" name="victim-date-of-birth_0" value="">
                                                <div class="invalid-feedback victim-date-of-birth_0"></div>
                                                {% comment %} <input type="date" class="form-control" id="victim-date-of-birth_0" name="victim-date-of-birth_0" value="2024-03-01"> {% endcomment %}
                                            </div>
                                            <div class="col-sm-6 mb-3"> <!--civil status-->
                                                <label for="victim-civilstatus_0" class="form-label">Civil Status</label>
                                                <select id="victim-civilstatus_0" name="victim-civilstatus_0"  class="form-select">
                                                    <option value="single">Single</option>
                                                    <option value="married">Married</option>
                                                    <option value="live-in">Live-In</option>
                                                    <option value="widowed">Widowed</option>
                                                    <option value="separated">Separated</option>
                                                </select>
                                            </div>
                                            <div class="col-sm-6 mb-3"> <!--nationality-->
                                                <label for="victim-nationality_0" class="form-label">Nationality</label>
                                                <select class="form-select" id="victim-nationality_0" name="victim-nationality_0">
                                                    <option value="Filipino" selected>Filipino</option>
                                                    <option value="Aeta">Aeta</option>
                                                    <option value="Agta">Agta</option>
                                                    <option value="Bicolano">Bicolano</option>
                                                    <option value="Bisaya">Bisaya</option>
                                                    <option value="Ilokano">Ilokano</option>
                                                    <option value="Igorot">Igorot</option>
                                                    <option value="Ilonggo">Ilonggo</option>
                                                    <option value="Kapampangan">Kapampangan</option>
                                                    <option value="Mangyan">Mangyan</option>
                                                    <option value="Moros">Moros</option>
                                                    <option value="Pangasinense">Pangasinense</option>
                                                    <option value="Tagalog">Tagalog</option>
                                                    <option value="Waray">Waray</option>
                                                    <!-- Add more options for other nationalities in the Philippines -->
                                                </select>
                                            </div>
                                            <div class="col-sm-6 mb-3"> <!--cp-->
                                                <label for="victim-cellphone_number_0" class="form-label">Cellphone Number <span class="required"></span></label>
                                                <input type="text" class="form-control req-inp victim-lastname" id="victim-cellphone_number_0" name="victim-cellphone_number_0">
                                                <div class="invalid-feedback victim-cellphone_number_0"></div>
                                            </div>
    
                                            <h3 class="fs-5 col-12 my-3">Local Address</h3>
                                            <div class="col-sm-6 mb-3"> <!--region-->
                                                <label for="victim-region_0" class="form-label">Region <span class="required"></span></label>
                                                <select id="victim-region_0" name="victim-region_0" class="form-select req-inp" disabled>
                                                    {% for region in default_regions %}
                                                        <option value="{{ region.name }}" data-code="{{ region.code }}">{{ region.name }}</option>
                                                    {% empty %}
                                                        <option>No data found</option>
                                                    {% endfor %}
                                                </select>
                                                <div class="invalid-feedback victim-region_0"></div>
                                            </div>
                                            <div class="col-sm-6 mb-3"> <!--province-->
                                                <label for="victim-province_0" class="form-label">Province <span class="required"></span></label>
                                                <select id="victim-province_0" name="victim-province_0" class="form-select req-inp">
                                                    <option value="">--Select Option--</option>
                                                    {% for province in default_provinces %}
                                                        <option value="{{ province.name }}" data-code="{{ province.code }}">{{ province.name }}</option>
                                                    {% empty %}
                                                        <option>No data found</option>
                                                    {% endfor %}
                                                </select>
                                                <div class="invalid-feedback victim-province_0"></div>
                                            </div>
                                            <div class="col-sm-6 mb-3"> <!--city-->
                                                <label for="victim-city_0" class="form-label">City/Municipality <span class="required"></span></label>
                                                <select id="victim-city_0" name="victim-city_0" class="form-select req-inp">
                                                    <option value="">--Select Option--</option>
                                                    {% for city in default_cities %}
                                                        <option value="{{ city.name }}" data-code="{{ city.code }}">{{ city.name }}</option>
                                                    {% empty %}
                                                        <option>No data found</option>
                                                    {% endfor %}
                                                </select>
                                                <div class="invalid-feedback victim-city_0"></div>
                                            </div>
                                            <div class="col-sm-6 mb-3"> <!--barangay-->
                                                <label for="victim-barangay_0" class="form-label">Barangay <span class="required"></span></label>
                                                <select id="victim-barangay_0" name="victim-barangay_0" class="form-select req-inp">
                                                    <option value="">--Select Option--</option>
                                                    {% for barangay in default_barangays %}
                                                        <option value="{{ barangay.name }}" data-code="{{ barangay.code }}">{{ barangay.name }}</option>
                                                    {% empty %}
                                                        <option>No data found</option>
                                                    {% endfor %}
                                                </select>
                                                <div class="invalid-feedback victim-barangay_0"></div>
                                                {% comment %} <select id="victim-barangay_0" name="victim-barangay_0" class="form-select">
                                                    <option value="Aplaya" selected>Aplaya</option>
                                                    <option value="Arena Blanco (Sauyo) ">Arena Blanco (Sauyo) </option>
                                                    <option value="Ayala">Ayala</option>
                                                    <option value="Bagong Calarian">Bagong Calarian</option>
                                                    <option value="Baluno">Baluno</option>
                                                    <option value="Boalan">Boalan</option>
                                                    <option value="Bolong">Bolong</option>
                                                    <option value="Buenavista">Buenavista</option>
                                                    <option value="Bunguiao">Bunguiao</option>
                                                    <option value="Busay (Tumaga Proper)">Busay (Tumaga Proper)</option>
                                                    <option value="Cabaluay">Cabaluay</option>
                                                    <option value="Cabatangan">Cabatangan</option>
                                                    <option value="Cacao">Cacao</option>
                                                    <option value="Calabasa">Calabasa</option>
                                                    <option value="Calarian">Calarian</option>
                                                    <option value="Camino Nuevo">Camino Nuevo</option>
                                                    <option value="Campo Islam">Campo Islam</option>
                                                    <option value="Canelar">Canelar</option>
                                                    <option value="Capisan">Capisan</option>
                                                    <option value="Cawit">Cawit</option>
                                                    <option value="Culianan">Culianan</option>
                                                    <option value="Curuan">Curuan</option>
                                                    <option value="Dita">Dita</option>
                                                    <option value="Divisoria">Divisoria</option>
                                                    <option value="Dulian (Upper Bunguiao)">Dulian (Upper Bunguiao)</option>
                                                    <option value="Dulian (Upper Pasonanca)">Dulian (Upper Pasonanca)</option>
                                                    <option value="Guisao">Guisao</option>
                                                    <option value="Guiwan">Guiwan</option>
                                                    <option value="Kasanyangan">Kasanyangan</option>
                                                    <option value="La Paz">La Paz</option>
                                                    <option value="Labuan">Labuan</option>
                                                    <option value="Lamisahan">Lamisahan</option>
                                                    <option value="Landang Gua">Landang Gua</option>
                                                    <option value="Landang Laum">Landang Laum</option>
                                                    <option value="Lanzones">Lanzones</option>
                                                    <option value="Lapakan">Lapakan</option>
                                                    <option value="Lapuyan">Lapuyan</option>
                                                    <option value="Latuan Curuan">Latuan Curuan</option>
                                                    <option value="Licomo">Licomo</option>
                                                    <option value="Limaong">Limaong</option>
                                                    <option value="Limpapa">Limpapa</option>
                                                    <option value="Luba">Luba</option>
                                                    <option value="Lumayang">Lumayang</option>
                                                    <option value="Lunzuran">Lunzuran</option>
                                                    <option value="Maasin">Maasin</option>
                                                    <option value="Malagutay">Malagutay</option>
                                                    <option value="Mampang">Mampang</option>
                                                    <option value="Manalipa">Manalipa</option>
                                                    <option value="Mangusu">Mangusu</option>
                                                    <option value="Manicahan">Manicahan</option>
                                                    <option value="Mariki">Mariki</option>
                                                    <option value="Mercedes">Mercedes</option>
                                                    <option value="Mutong">Mutong</option>
                                                    <option value="Pamucutan">Pamucutan</option>
                                                    <option value="Panubigan">Panubigan</option>
                                                    <option value="Pasilmanta (Sacol Island)">Pasilmanta (Sacol Island)</option>
                                                    <option value="Pasobolong">Pasobolong</option>
                                                    <option value="Pasonanca">Pasonanca</option>
                                                    <option value="Patalon">Patalon</option>
                                                    <option value="Putsan">Putsan</option>
                                                    <option value="Quiniput">Quiniput</option>
                                                    <option value="Recodo">Recodo</option>
                                                    <option value="Rio Hondo">Rio Hondo</option>
                                                    <option value="Salaan">Salaan</option>
                                                    <option value="San Jose Cawa-Cawa">San Jose Cawa-Cawa</option>
                                                    <option value="San Jose Gusu">San Jose Gusu</option>
                                                    <option value="San Ramon">San Ramon</option>
                                                    <option value="San Roque">San Roque</option>
                                                    <option value="Sangali">Sangali</option>
                                                    <option value="Santa Barbara">Santa Barbara</option>
                                                    <option value="Santa Catalina">Santa Catalina</option>
                                                    <option value="Santa Maria">Santa Maria</option>
                                                    <option value="Santa Roza">Santa Roza</option>
                                                    <option value="Sibulao (Talisayan)">Sibulao (Talisayan)</option>
                                                    <option value="Sinubong">Sinubong</option>
                                                    <option value="Sinunuc">Sinunuc</option>
                                                    <option value="Sta. Cruz">Sta. Cruz</option>
                                                    <option value="Sta. Maria">Sta. Maria</option>
                                                    <option value="Sta. Catalina">Sta. Catalina</option>
                                                    <option value="Sta. Catalina (Talisayan)">Sta. Catalina (Talisayan)</option>
                                                    <option value="Sta. Maria">Sta. Maria</option>
                                                    <option value="Sto. Niño" selected>Sto. Niño</option>
                                                    <option value="Tagasilay">Tagasilay</option>
                                                    <option value="Taguiti">Taguiti</option>
                                                    <option value="Talabaan">Talabaan</option>
                                                    <option value="Talisayan">Talisayan</option>
                                                    <option value="Talon-Talon">Talon-Talon</option>
                                                    <option value="Taluksangay">Taluksangay</option>
                                                    <option value="Talungon">Talungon</option>
                                                    <option value="Tetuan">Tetuan</option>
                                                    <option value="Tictapul">Tictapul</option>
                                                    <option value="Tigbalabag">Tigbalabag</option>
                                                    <option value="Tigtabon">Tigtabon</option>
                                                    <option value="Tolosa">Tolosa</option>
                                                    <option value="Tugbungan">Tugbungan</option>
                                                    <option value="Tulungatung">Tulungatung</option>
                                                    <option value="Tumaga">Tumaga</option>
                                                    <option value="Tumalutab">Tumalutab</option>
                                                    <option value="Tumitus">Tumitus</option>
                                                    <option value="Victoria">Victoria</option>
                                                    <option value="Vitali">Vitali</option>
                                                    <option value="Zambowood">Zambowood</option>
                                                </select> {% endcomment %}
                                            </div>
                                            <div class="col-sm-6 mb-3"> <!--street-->
                                                <label for="victim-street_0" class="form-label">Street <span class="required"></span></label>
                                                <input type="text" class="form-control req-inp" id="victim-street_0" name="victim-street_0">
                                                <div class="invalid-feedback victim-street_0"></div>
                                            </div>
                                            <div class="col-sm-6 mb-3"> <!--addresss-->
                                                <label for="victim-house-info_0" class="form-label">Landmark <span class="required"></span></label>
                                                <input type="text" class="form-control req-inp" name="victim-house-info_0" id="victim-house-info_0">
                                                <div class="invalid-feedback victim-house-info_0"></div>
                                            </div>
                                        </div>
                                    </div><!--end of victim form-->
                                </div>
                                <hr>
                                <div class="d-flex justify-content-end mt-4">
                                    <button class="btn btn-primary ml-auto next-perpetrator-button js-btn-next" type="button" title="Next">Next</button>
                                </div>
                            </div>

                        </div>
                        <!--single form panel--><!--perpetrator-->
                        <div class="multisteps-form__panel" data-animation="slideVert">

                            <h2 class="text-center"><strong>Perpetrator Information</strong></h2>
                            <p class="text-center text-muted mb-4 mb-md-5">The person may be responsible for a wrongdoing.</p>

                            <!--perpetrators navigation tabs-->
                            <div class="col-md-11 mx-auto mb-2 d-flex flex-nowrap gap-2 overflow-auto nav nav-pills" id="perpetrator-navtabs-container">
                                <div class="border rounded p-2 text-nowrap nav-link active d-flex align-items-center" data-toggle="tab" data-target="#perpetrator-form_0">
                                    <i class="fa-solid fa-user me-1"></i>
                                    <span class="tab-name">
                                        Perpetrator
                                    </span>
                                </div>
                                <button class="btn btn-outline-primary text-nowrap" id="add-perpetrator-form" title="Add a new form"><i class="fa-solid fa-plus px-1"></i></button>
                            </div>
                            <div class="multisteps-form__content col-12 col-md-11 border rounded p-4 mx-auto">

                                <div class="tab-content">
                                    <!--perpetrator form-->
                                    <div class="tab-pane fade show active individual-form perpetrator-form" id="perpetrator-form_0">
                                        <div class="row">
                                            <div class="col-12 d-flex align-items-center mb-3">
                                                <h4 class="user_counter fw-bold border rounded py-1 px-3 text-muted " id="perpetrator_counter">
                                                    1
                                                </h4>
                                                <button class="delete-individual-form btn btn-outline-danger ms-auto" type="button" title="Delete this form">
                                                    <i class="fa-solid fa-trash-can"></i>
                                                </button>
                                            </div>

                                            <div class="col-12 d-flex flex-column flex-md-row justify-content-md-between">
                                                <h3 class="fs-5 mb-3">Personal Information</h3>
                                                <div class="fw-light mb-3">Fields with <span class="required"></span> are required</div>
                                            </div>
                                            <div class="col-sm-6 mb-3"> <!--Firstname-->
                                                <label for="perp-firstname_0" class="form-label">First name <span class="required"></span></label>
                                                <input type="text" class="form-control req-inp" id="perp-firstname_0" name="perp-firstname_0">
                                                <div class="invalid-feedback perp-firstname_0"></div>
                                            </div>
                                            <div class="col-sm-6 mb-3"> <!--middlename-->
                                                <label for="perp-middlename_0" class="form-label">Middle name</label>
                                                <input type="text" class="form-control" id="perp-middlename_0" name="perp-middlename_0">
                                                <div class="invalid-feedback perp-middlename_0"></div>
                                            </div>
                                            <div class="col-sm-6 mb-3"> <!--lastname-->
                                                <label for="perp-lastname_0" class="form-label ">Last name <span class="required"></span></label>
                                                <input type="text" class="form-control req-inp perpetrator-lastname" id="perp-lastname_0" name="perp-lastname_0">
                                                <div class="invalid-feedback perp-lastname_0"></div>
                                            </div>
                                            <div class="col-sm-6 mb-3"> <!--suffix-->
                                                <label for="perp-Suffix_0" class="form-label">Suffix</label>
                                                <select id="perp-Suffix_0" name="perp-Suffix_0" class="form-select">
                                                    <option value="none">N/A</option>
                                                    <option value="sr">Sr</option>
                                                    <option value="jr">Jr</option>
                                                    <option value="ii">II</option>
                                                    <option value="iii">III</option>
                                                    <option value="iv">IV</option>
                                                </select>
                                            </div>
                                            <div class="col-sm-6 mb-3"> <!--alias-->
                                                <label for="perp-alias_0" class="form-label">Alias <span class="required"></label>
                                                <input type="text" class="form-control req-inp" id="perp-alias_0" name="perp-alias_0">
                                                <div class="invalid-feedback perp-alias_0"></div>
                                            </div>
                                            <div class="col-sm-6 mb-3"> <!--gender-->
                                                <label for="perp-sex_0" class="form-label">Gender <span class="required"></span></label>
                                                <select id="perp-sex_0" name="perp-sex_0" class="form-select req-inp gender-input">
                                                    <option value="">--Select Option--</option>
                                                    <option value="male">Male</option>
                                                    <option value="female">Female</option>
                                                    <option value="rather_not_say">Rather not say</option>
                                                    <option>Custom</option>
                                                </select>
                                                <div class="invalid-feedback perp-sex_0"></div>
                                                <input type="text" class="form-control mt-2 custom-gender" placeholder="Specify" style="display: none;">
                                            </div>
                                            <div class="col-sm-6 mb-3"> <!--date of birth-->
                                                <label for="perp-date-of-birth_0" class="form-label">Date of Birth <span class="required"></span></label>
                                                <input type="date" class="form-control req-inp" id="perp-date-of-birth_0" name="perp-date-of-birth_0" value="">
                                                <div class="invalid-feedback perp-date-of-birth_0"></div>
                                            </div>
                                            <div class="col-sm-6 mb-3"> <!--nationality-->
                                                <label for="perp-nationality_0" class="form-label">Nationality</label>
                                                <select class="form-select" id="perp-nationality_0" name="perp-nationality_0">
                                                    <option value="Filipino" selected>Filipino</option>
                                                    <option value="Aeta">Aeta</option>
                                                    <option value="Agta">Agta</option>
                                                    <option value="Bicolano">Bicolano</option>
                                                    <option value="Bisaya">Bisaya</option>
                                                    <option value="Ilokano">Ilokano</option>
                                                    <option value="Igorot">Igorot</option>
                                                    <option value="Ilonggo">Ilonggo</option>
                                                    <option value="Kapampangan">Kapampangan</option>
                                                    <option value="Mangyan">Mangyan</option>
                                                    <option value="Moros">Moros</option>
                                                    <option value="Pangasinense">Pangasinense</option>
                                                    <option value="Tagalog">Tagalog</option>
                                                    <option value="Waray">Waray</option>
                                                    <!-- Add more options for other nationalities in the Philippines -->
                                                </select>
                                            </div>
                                            <div class="col-sm-6 mb-3"> <!--Identifying remarks-->
                                                <label for="perp-identifying-marks_0" class="form-label">Identifying Marks <span class="required"></label>
                                                <input type="text" class="form-control req-inp" id="perp-identifying-marks_0" name="perp-identifying-marks_0">
                                                <div class="invalid-feedback perp-identifying-marks_0"></div>
                                            </div>
                                            <div class="col-sm-6 mb-3"> <!--relation to victim-->
                                                <label for="perp-relationsip-victim_0" class="form-label">Relationship to Victim <span class="required"></span></label>
                                                {% comment %} <select id="perp-relationsip-victim_0" name="perp-relationsip-victim_0" class="form-select">
                                                    <option value="currentSpouse">Current spouse / partner</option>
                                                    <option value="formerSpouse">Former spouse / partner</option>
                                                    <option value="currentFiance">Current fiance / dating relationship</option>
                                                    <option value="formerFiance">Former fiance / dating relationship</option>
                                                    <option value="employer">Employer / manager / supervisor</option>
                                                    <option value="agentOfEmployer">Agent of Employer</option>
                                                    <option value="teacher">Teacher / instructor / professor</option>
                                                    <option value="coach">Coach / trainer</option>
                                                    <option value="immediate family">Immediate family</option>
                                                    <option value="otherRelatives">Other relatives</option>
                                                    <option value="peopleOfAuthority">People of authority / service provider</option>
                                                    <option value="neighbors">Neighbors / peers / coworkers / classmates</option>
                                                    <option value="Stranger">Stranger</option>
                                                </select> {% endcomment %}
                                                <input id="perp-relationsip-victim_0" name="perp-relationsip-victim_0" class="form-control req-inp">
                                                <div class="invalid-feedback perp-relationsip-victim_0"></div>
                                            </div>

                                            <h3 class="fs-5 col-12 my-3">Local Address</h3>
                                            <div class="col-sm-6 mb-3"> <!--region-->
                                                <label for="perp-region_0" class="form-label">Region <span class="required"></span></label>
                                                <select id="perp-region_0" name="perp-region_0" class="form-select req-inp" disabled>
                                                    {% for region in default_regions %}
                                                        <option value="{{ region.name }}" data-code="{{ region.code }}">{{ region.name }}</option>
                                                    {% empty %}
                                                        <option>No data found</option>
                                                    {% endfor %}
                                                </select>
                                                <div class="invalid-feedback perp-region_0"></div>
                                            </div>
                                            <div class="col-sm-6 mb-3"> <!--province-->
                                                <label for="perp-province_0" class="form-label">Province <span class="required"></span></label>
                                                <select id="perp-province_0" name="perp-province_0" class="form-select req-inp">
                                                    <option value="">--Select Option--</option>
                                                    {% for province in default_provinces %}
                                                        <option value="{{ province.name }}" data-code="{{ province.code }}">{{ province.name }}</option>
                                                    {% empty %}
                                                        <option>No data found</option>
                                                    {% endfor %}
                                                </select>
                                                <div class="invalid-feedback perp-province_0"></div>
                                            </div>
                                            <div class="col-sm-6 mb-3"> <!--city-->
                                                <label for="perp-city_0" class="form-label">City/Municipality <span class="required"></span></label>
                                                <select id="perp-city_0" name="perp-city_0" class="form-select req-inp">
                                                    <option value="">--Select Option--</option>
                                                    {% for city in default_cities %}
                                                        <option value="{{ city.name }}" data-code="{{ city.code }}">{{ city.name }}</option>
                                                    {% empty %}
                                                        <option>No data found</option>
                                                    {% endfor %}
                                                </select>
                                                <div class="invalid-feedback perp-city_0"></div>
                                            </div>
                                            <div class="col-sm-6 mb-3"> <!--barangay-->
                                                <label for="perp-barangay_0" class="form-label">Barangay <span class="required"></span></label>
                                                <select id="perp-barangay_0" name="perp-barangay_0" class="form-select req-inp">
                                                    <option value="">--Select Option--</option>
                                                    {% for barangay in default_barangays %}
                                                        <option value="{{ barangay.name }}" data-code="{{ barangay.code }}">{{ barangay.name }}</option>
                                                    {% empty %}
                                                        <option>No data found</option>
                                                    {% endfor %}
                                                </select>
                                                <div class="invalid-feedback perp-barangay_0"></div>
                                            </div>
                                            <div class="col-sm-6 mb-3"> <!--street-->
                                                <label for="perp-street_0" class="form-label">Street <span class="required"></span></label>
                                                <input type="text" class="form-control req-inp" id="perp-street_0" name="perp-street_0">
                                                <div class="invalid-feedback perp-street_0"></div>
                                            </div>
                                            <div class="col-sm-6 mb-3"> <!--address-->
                                                <label for="perp-address-info_0" class="form-label">Landmark <span class="required"></span></label>
                                                <input type="text" class="form-control req-inp" id="perp-address-info_0" name="perp-address-info_0">
                                                <div class="invalid-feedback perp-address-info_0" ></div>
                                            </div>
                                        </div>
                                    </div> <!--end of perpetrator form-->
                                </div>
                                <hr>
                                <div class="d-flex justify-content-between mt-4">
                                    <button class="btn btn-outline-primary js-btn-prev" type="button" title="Prev">Back</button>
                                    <button class="btn btn-primary ml-auto next-incident-button js-btn-next" type="button" title="Next">Next</button>
                                </div>
                            </div>
                        </div>
                        <!--single form panel--><!--incident-->
                        <div class="multisteps-form__panel" data-animation="slideVert">
                            
                            <h2 class="text-center mb-4 mb-md-5"><strong>Incident Information</strong></h2>

                            <div class="multisteps-form__content col-12 col-md-11 border rounded p-4 mx-auto">

                                <div class="row incident-form-panel">

                                    <div class="col-12 d-flex flex-column flex-md-row justify-content-md-between">
                                        <h3 class="fs-5 mb-3">Incident Details</h3>
                                        <div class="fw-light mb-3">Fields with <span class="required"></span> are required</div>
                                    </div>
                                    <div class="col-12 mb-3">
                                        <label for="incident-desc" class="form-label">Description <span class="required"></span></label>
                                        <textarea class="form-control req-inp" name="incident-desc" id="incident-desc" rows="3"></textarea>
                                        <div class="invalid-feedback incident-street"></div>
                                    </div>
                                    <div class="col-12 mb-3">
                                        <label for="incident-evidence" class="form-label">Upload Photo Evidences</label>
                                        <input class="form-control mb-2" type="file" id="incident-evidence" name="evidence_file" accept="image/*" multiple>
                                        <div class="invalid-feedback incident-street"></div>
                                        <div class="d-flex p-2 border rounded gap-2 overflow-auto" id="photo-evidence-container" style="height: 100px;">
                                        </div>
                                        
                                    </div>

                                    <div class="col-sm-6 mb-3">
                                        <label for="date-latest-incident" class="form-label">Date of Latest Incident</label>
                                        <input type="date" class="form-control" name="date-latest-incident" id="date-latest-incident" value="">
                                    </div>
                                    <div class="col-sm-6 mb-3">
                                        <label for="incomplete-date" class="form-label">Incomplete Date</label>
                                        <div class="d-flex align-items-center gap-2 pt-1">
                                            <input type="hidden" name="incomplete-date" value="False"> <!-- Hidden input with value False -->
                                            <input class="form-check-input form-check" type="checkbox" id="incomplete-date" name="incomplete-date" value="True"> <!-- Checkbox input with value True -->
                                            <label for="incomplete-date" class="fs-7">(Check if date is not complete)</label>
                                        </div>
                                    </div>
                                    
                                    <h3 class="fs-5 col-12 my-3">Place of Incident</h3>
                                    <div class="col-sm-6 mb-3"> <!--region-->
                                        <label for="incident-region" class="form-label">Region <span class="required"></span></label>
                                        <select id="incident-region" name="incident-region" class="form-select req-inp" disabled>
                                            {% for region in default_regions %}
                                                <option value="{{ region.name }}" data-code="{{ region.code }}">{{ region.name }}</option>
                                            {% empty %}
                                                <option>No data found</option>
                                            {% endfor %}
                                        </select>
                                        <div class="invalid-feedback incident-region"></div>
                                    </div>
                                    <div class="col-sm-6 mb-3"> <!--province-->
                                        <label for="incident-province" class="form-label">Province <span class="required"></span></label>
                                        <select id="incident-province" name="incident-province" class="form-select req-inp">
                                            <option value="">--Select Option--</option>
                                            {% for province in default_provinces %}
                                                <option value="{{ province.name }}" data-code="{{ province.code }}">{{ province.name }}</option>
                                            {% empty %}
                                                <option>No data found</option>
                                            {% endfor %}
                                        </select>
                                        <div class="invalid-feedback incident-province"></div>
                                    </div>
                                    <div class="col-sm-6 mb-3"> <!--city-->
                                        <label for="incident-city" class="form-label">City/Municipality <span class="required"></span></label>
                                        <select id="incident-city" name="incident-city" class="form-select req-inp">
                                            <option value="">--Select Option--</option>
                                            {% for city in default_cities %}
                                                <option value="{{ city.name }}" data-code="{{ city.code }}">{{ city.name }}</option>
                                            {% empty %}
                                                <option>No data found</option>
                                            {% endfor %}
                                        </select>
                                        <div class="invalid-feedback incident-city"></div>
                                    </div>
                                    <div class="col-sm-6 mb-3"> <!--barangay-->
                                        <label for="incident-barangay" class="form-label">Barangay <span class="required"></span></label>
                                        <select id="incident-barangay" name="incident-barangay" class="form-select req-inp">
                                            <option value="">--Select Option--</option>
                                            {% for barangay in default_barangays %}
                                                <option value="{{ barangay.name }}" data-code="{{ barangay.code }}">{{ barangay.name }}</option>
                                            {% empty %}
                                                <option>No data found</option>
                                            {% endfor %}
                                        </select>
                                        <div class="invalid-feedback incident-barangay"></div>
                                    </div>
                                    <div class="col-sm-6 mb-3"> <!--street-->
                                        <label for="incident-street" class="form-label">Street <span class="required"></span></label>
                                        <input type="text" class="form-control req-inp" id="incident-street" name="incident-street">
                                        <div class="invalid-feedback incident-street"></div>
                                    </div>
                                    <div class="col-sm-6 mb-3"> <!--place of incident-->
                                        <label for="place-incident" class="form-label">Type of Place <span class="required"></span></label>
                                        <select id="place-incident" name="place-incident" class="form-select req-inp">
                                            <option value="" selected>--Select Place of Incident--</option>
                                            <option value="house">House</option>
                                            <option value="work">Work</option>
                                            <option value="school">School</option>
                                            <option value="commercialPlaces">Commercial Places</option>
                                            <option value="religion">Religious Institutions</option>
                                            <option value="placeOfMedicalTreatment">Place of Medical Treatment</option>
                                            <option value="transport">Transport & Connecting Sites</option>
                                            <option value="brothles">Brothels and Similar Establishments</option>
                                            <option value="others">Others</option>
                                            <option value="noResponse">No Response</option>
                                        </select>
                                        <div class="invalid-feedback place-incident"></div>
                                    </div>

                                </div>
                                <hr>
                                <div class="d-flex justify-content-between mt-4 col-12">
                                    <button class="btn btn-outline-primary js-btn-prev" type="button" title="Prev">Back</button>
                                    <button class="btn btn-primary ml-auto btn-next-contact-person js-btn-next" type="button" title="Next">Next</button>
                                </div>
                            </div>
                        </div>
                        <!--single form panel--><!--contact person-->
                        <div class="multisteps-form__panel" data-animation="slideVert">
                            
                            <h2 class="text-center mb-4 mb-md-5"><strong>Contact Person Information</strong></h2>

                            <div class="multisteps-form__content col-12 col-md-11 border rounded p-4 mx-auto">

                                <div class="row contact-form-panel">

                                    <div class="col-12 d-flex flex-column flex-md-row justify-content-md-between">
                                        <h3 class="fs-5 mb-3">Personal Information</h3>
                                        <div class="fw-light mb-3">Fields with <span class="required"></span> are required</div>
                                    </div>
                                    <div class="col-sm-6 mb-3">
                                        <label for="contact-firstname" class="form-label">First Name <span class="required"></span></label>
                                        <input type="text" class="form-control req-inp" id="contact-firstname" name="contact-firstname">
                                        <div class="invalid-feedback contact-firstname" ></div>
                                    </div>
                                    <div class="col-sm-6 mb-3">
                                        <label for="contact-midname" class="form-label">Middle Name</label>
                                        <input type="text" class="form-control" id="contact-midname" name="contact-midname">
                                        <div class="invalid-feedback contact-midname" ></div>
                                    </div>
                                    <div class="col-sm-6 mb-3">
                                        <label for="contact-lastname" class="form-label">Last Name <span class="required"></span></label>
                                        <input type="text" class="form-control req-inp" id="contact-lastname" name="contact-lastname">
                                        <div class="invalid-feedback contact-lastname" ></div>
                                    </div>
                                    <div class="col-sm-6 mb-3">
                                        <label for="contact-Suffix" class="form-label">Suffix</label>
                                        <select id="contact-Suffix" name="contact-Suffix" class="form-select">
                                            <option value="none">N/A</option>
                                            <option value="sr">Sr</option>
                                            <option value="jr">Jr</option>
                                            <option value="ii">II</option>
                                            <option value="iii">III</option>
                                            <option value="iv">IV</option>
                                        </select>
                                    </div>
                                    <div class="col-sm-6 mb-3">
                                        <label for="relationship" class="form-label">Relationship to the Victim <span class="required"></span></label>
                                        <input type="text" class="form-control req-inp" id="relationship" name="relationship">
                                        <div class="invalid-feedback relationship" ></div>
                                    </div>

                                    <h3 class="fs-5 my-3">Contact Details</h3>
                                    <div class="col-sm-6 mb-3">
                                        <label for="contact-number" class="form-label">Mobile No.</label>
                                        <input type="number" class="form-control" id="contact-number" name="contact-number" value="0">
                                    </div>
                                    <div class="col-sm-6 mb-3">
                                        <label for="contact-tel" class="form-label">Telephone No.</label>
                                        <input type="number" class="form-control" id="contact-tel" name="contact-tel" value="0">
                                    </div>
                                    
                                    <h3 class="fs-5 my-3">Local Address</h3>
                                    <div class="col-sm-6 mb-3"> <!--region-->
                                        <label for="contact-region" class="form-label">Region <span class="required"></span></label>
                                        <select id="contact-region" name="contact-region" class="form-select req-inp" disabled>
                                            {% for region in default_regions %}
                                                <option value="{{ region.name }}" data-code="{{  region.code }}">{{ region.name }}</option>
                                            {% empty %}
                                                <option>No data found</option>
                                            {% endfor %}
                                        </select>
                                        <div class="invalid-feedback contact-region"></div>
                                    </div>
                                    <div class="col-sm-6 mb-3"> <!--province-->
                                        <label for="contact-province" class="form-label">Province <span class="required"></span></label>
                                        <select id="contact-province" name="contact-province" class="form-select req-inp">
                                            <option value="">--Select Option--</option>
                                            {% for province in default_provinces %}
                                                <option value="{{ province.name }}" data-code="{{ province.code }}">{{ province.name }}</option>
                                            {% empty %}
                                                <option>No data found</option>
                                            {% endfor %}
                                        </select>
                                        <div class="invalid-feedback contact-province"></div>
                                    </div>
                                    <div class="col-sm-6 mb-3"> <!--city-->
                                        <label for="contact-city" class="form-label">City/Municipality <span class="required"></span></label>
                                        <select id="contact-city" name="contact-city" class="form-select req-inp">
                                            <option value="">--Select Option--</option>
                                            {% for city in default_cities %}
                                                <option value="{{ city.name }}" data-code="{{ city.code }}">{{ city.name }}</option>
                                            {% empty %}
                                                <option>No data found</option>
                                            {% endfor %}
                                        </select>
                                        <div class="invalid-feedback contact-city"></div>
                                    </div>
                                    <div class="col-sm-6 mb-3"> <!--barangay-->
                                        <label for="contact-barangay" class="form-label">Barangay <span class="required"></span></label>
                                        <select id="contact-barangay" name="contact-barangay" class="form-select req-inp">
                                            <option value="">--Select Option--</option>
                                            {% for barangay in default_barangays %}
                                                <option value="{{ barangay.name }}" data-code="{{ barangay.code }}">{{ barangay.name }}</option>
                                            {% empty %}
                                                <option>No data found</option>
                                            {% endfor %}
                                        </select>
                                        <div class="invalid-feedback contact-baarangay"></div>
                                    </div>
                                    <div class="col-sm-6 mb-3"> <!--street-->
                                        <label for="contact-street" class="form-label">Street <span class="required"></span></label>
                                        <input type="text" class="form-control  req-inp" id="contact-street" name="contact-street">
                                        <div class="invalid-feedback contact-street"></div>
                                    </div>
                                    <div class="col-sm-6 mb-3"> <!--address-->
                                        <label for="contact-bldg-no" class="form-label">Landmark <span class="required"></span></label>
                                        <input type="text" class="form-control req-inp" name="contact-bldg-no" id="contact-bldg-no">
                                        <div class="invalid-feedback contact-bldg-no"></div>
                                    </div>
                                </div>
                                <hr>
                                <div class="d-flex justify-content-between mt-4 col-12">
                                    <button class="btn btn-outline-primary js-btn-prev" type="button" title="Prev">Back</button>
                                    <button class="btn btn-primary ml-auto btn-next-service js-btn-next" type="button" title="Next">Next</button>
                                </div>
                            </div>
                        </div>
                        <!--single form panel--><!--service-->
                        <div class="multisteps-form__panel" data-animation="slideVert">
                            <div class="multisteps-form__content col-12 col-md-11 mx-auto">

                                <h2 class="text-center mb-4 mb-md-5"><strong>Service Information</strong></h2>

                                <div class="label-form border rounded p-4 mb-4">
                                    <div class="row g-4 row-cols-1 row-cols-lg-2">
                                        {% comment %} <div class="col-6">
                                            <input type="radio" class="btn-check" name="service" id="crisis" value="crisis" autocomplete="off" checked>
                                            <label class="btn custom-btn" for="crisis">Crisis Intervention Including Rescue</label>
                                        </div> {% endcomment %}
                                        <label for="crisis" class="col">
                                            <div class="service-option form-check card shadow-sm p-4 h-100 card-link">
                                                <div class="card-title">
                                                    <span>
                                                        <i class="fa-solid fa-life-ring"></i>
                                                    </span>
                                                    <h3 class="fw-bold fs-5">Crisis Intervention Including Rescue</h3>
                                                </div>
                                                <p class="fw-light">Provides immediate support in emergencies, including rescue operations, temporary shelter, and access to essential resources.</p>
                                                <div class="d-flex justify-content-end">
                                                    <input type="radio" class="form-check-input" name="service" id="crisis" value="crisis" autocomplete="off">
                                                </div>
                                            </div>
                                        </label>
                                        <label for="issuance" class="col">
                                            <div class="service-option form-check card shadow-sm p-4 h-100 card-link">
                                                <div class="card-title">
                                                    <span>
                                                        <i class="fa-solid fa-shield-halved"></i>
                                                    </span>
                                                    <h3 class="fw-bold fs-5">Issuance / Enforcement of Barangay Protection Order</h3>
                                                </div>
                                                <p class="fw-light">Issues and enforces protective orders at the barangay to ensure the safety of individuals facing domestic violence.</p>
                                                <div class="d-flex justify-content-end">
                                                    <input type="radio" class="form-check-input" name="service" id="issuance" value="issuance" autocomplete="off">
                                                </div>
                                            </div>
                                        </label>

                                    </div>
                                </div>
                                <hr>
                                <div class="d-flex justify-content-between mt-4 col-12">
                                    <button class="btn btn-outline-primary js-btn-prev" type="button" title="Prev">Back</button>
                                    <button class="btn btn-primary ml-auto btn-form-submit" type="submit" title="Send" id="submitBtn" disabled>Submit Report</button>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Modal success -->
<div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
        <div class="modal-header">
            <h1 class="modal-title fs-5" id="staticBackdropLabel">Success</h1>
        </div>
        <div class="modal-body">
            <div class="wrapper"> <svg class="checkmark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52"> <circle class="checkmark__circle" cx="26" cy="26" r="25" fill="none"/> <path class="checkmark__check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8"/>
            </svg>
            </div>
            <h3 class="text-center">Success</h3>
            <p class="py-1 fs-4 text-center">Thank you for reporting! Your report will help us maintain a safe and enjoyable environment for everyone. We'll review the issue promptly. If necessary, we'll take appropriate action. Your contribution is appreciated!</p>
        </div>
        <div class="modal-footer">
            <a type="button" class="btn btn-primary" href="{% url 'home' %}">Back to HomePage</a>
        </div>
        </div>
    </div>
</div>
<!-- Email Modal -->
<div class="modal fade" id="sendEmail" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5" id="staticBackdropLabel">Contact Verification</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <form id="contactConfirmationForm">
                <div class="modal-body">
                    <div class="container col-lg-12 col-md-12 col-sm-8">
                        <h3 class="text-center">Before We Can Process Your Case.</h3>
                        {% if twilio_type == 'local' %}
                            <div class="form-label mb-4">Use your Email that was Associated with the Case.</div>
                        {% else %}
                            <div class="form-label mb-4">Use your Email or Phone that was Associated with the Case.</div>
                        {% endif %}
                        <ul class="nav nav-underline mb-3" id="myTab" role="tablist">
                            <li class="nav-item" role="presentation">
                                <button class="nav-link active" id="email-tab" data-bs-toggle="tab" data-bs-target="#email-panel" type="button" role="tab" aria-controls="email" aria-selected="true">Email</button>
                            </li>
                            <li class="nav-item {% if twilio_type == 'local' %}d-none{% endif %}" role="presentation">
                                <button class="nav-link" id="phone-tab" data-bs-toggle="tab" data-bs-target="#phone-panel" type="button" role="tab" aria-controls="phone" aria-selected="false">Phone</button>
                            </li>
                        </ul>
                        <div class="tab-content mb-3" id="myTabContent">
                            <div class="tab-pane fade show active" id="email-panel" role="tabpanel" aria-labelledby="email-tab">
                                <input type="email" class="form-control" id="email-confirm" name="email-confirm" aria-describedby="emailFeedback" placeholder="example@email.com">
                                <div id="emailFeedback" class="invalid-feedback err-msg-email">
                                    No Account Associated with any Case.
                                </div>
                            </div>
                            <div class="tab-pane fade" id="phone-panel" role="tabpanel" aria-labelledby="phone-tab">
                                <div class="input-group">
                                    <span class="input-group-text">+63</span>
                                    <input type="text" class="form-control" id="phone-confirm" name="phone-confirm" placeholder="987 654 3210" maxlength="10">
                                </div>
                                <div id="phoneFeedback" class="invalid-feedback err-msg-phone">
                                    No Account Associated with any Case.
                                </div>
                            </div>
                        </div>
                        <div class="g-recaptcha d-flex justify-content-center mb-3" data-sitekey="{{ site_key }}" data-callback="err_captcha_reset"></div>
                        <div class="err-msg-recaptcha fs-7 text-danger mb-3"></div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary" id="send_email_confirmation">Confirm</button>
                </div>
            </form>
        </div>
    </div>
</div>
<!-- OTP Modal -->
<div class="modal fade" id="otpModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="otpModalToggleLabel">One-Time Password Verification</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <h6 class="text-center">Please enter the one-time password to verify your account</h6>
                <div class="text-center mt-3">
                    <span>A code has been sent to</span>
                    <small id="hidden_email">*****gmail.com</small>
                </div>
                <form id="otpForm" method="post">
                    {% csrf_token %}
                    <div id="otp" class="inputs d-flex justify-content-center mt-4">
                        <input class="m-2 text-center form-control rounded" type="text" name="otp_1" maxlength="1" />
                        <input class="m-2 text-center form-control rounded" type="text" name="otp_2" maxlength="1" />
                        <input class="m-2 text-center form-control rounded" type="text" name="otp_3" maxlength="1" />
                        <input class="m-2 text-center form-control rounded" type="text" name="otp_4" maxlength="1" />
                        <input class="m-2 text-center form-control rounded" type="text" name="otp_5" maxlength="1" />
                        <input class="m-2 text-center form-control rounded" type="text" name="otp_6" maxlength="1" />
                    </div>
                    <div class="text-center mt-4">
                        <button class="btn btn-primary px-4" type="submit">Validate</button>
                    </div>
                    <div class="text-center mt-3 text-danger" style="display: none;">
                        <i class='bx bx-error-circle'></i>
                        <span id="otpErrorMessage"></span>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <div class="content d-flex justify-content-center align-items-center">
                    <span id="resendText">Didn't get the code</span>
                    <a href="#" id="resendButton" class="text-decoration-none ms-3">Resend</a>
                    <span id="resendTimer" class="text-decoration-none ms-3"></span>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Add the toast container to your HTML, make sure it's placed in a suitable location -->
<div class="toast-container position-fixed top-0 end-0 p-3">
    <div id="errorToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
        <div class="toast-header text-dark" style="background-color:#899499;">
            <img src="{% static 'img/ecs-no-bg-2.png' %}" class="rounded me-2" alt="..." style="width:20px;">
            <strong class="me-auto text-dark">Error</strong>
            <small>Just Now</small>
            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
        <div class="toast-body text-dark">
        </div>
    </div>
</div>

<!--loading skeleton-->
<div class="multiform-loading">
    <div class="container-fluid p-4">
        <div class="row">
            <div class="col-md-10 p-4 mx-auto placeholder-glow">
                <div class="row">
                    <div class="col-8 mx-auto mb-5">
                        <div class="placeholder loading-box lb-1"></div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-6 mx-auto mb-5">
                        <div class="placeholder loading-box lb-2"></div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12 mx-auto">
                        <div class="placeholder loading-box lb-3"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock content %}
{% block scripts %}
<script src="{% static 'js/multi-form.js' %}"></script>
<script src="{% static 'js/dynamic_forms.js' %}"></script>
<script>
    const csrf_token = '{{ csrf_token }}'
    function showToast(type, message) {
        var toastId = type === 'success' ? '#successToast' : '#errorToast';
        var toast = new bootstrap.Toast(document.querySelector(toastId));
        // Update toast message
        var toastBody = toastId + ' .toast-body';
        $(toastBody).text(message);
        // Show toast
        toast.show();
    }
    
    $(document).ready(function() {
        function checkButtonsValidity() {
            const FirstNameValue = $("#contact-firstname").val().trim();
            //const MidNameValue = $("#contact-midname").val().trim();
            const LastNameValue = $("#contact-lastname").val().trim();
            const RelationshipValue = $("#relationship").val().trim();
            const StreetValue = $("#contact-street").val().trim();
            const AddressValue = $("#contact-bldg-no").val().trim();

            const isStreetValid = !$("#contact-street").hasClass('is-invalid') && StreetValue !== "";
            const isFirstNameValid = !$("#contact-firstname").hasClass('is-invalid') && FirstNameValue !== "";
            //const isMidNameValid = !$("#contact-midname").hasClass('is-invalid') && MidNameValue !== "";
            const isLastNameValid = !$("#contact-lastname").hasClass('is-invalid') && LastNameValue !== "";
            const isRelationshipValid = !$("#relationship").hasClass('is-invalid') && RelationshipValue !== "";
            const isAddressValid = !$("#contact-bldg-no").hasClass('is-invalid') && AddressValue !== "";

            const progressButton = $('button[title="Service Information"]');
            const nextButton = $('.btn-next-service');
        
            if (isStreetValid && isFirstNameValid && isLastNameValid && isRelationshipValid && isAddressValid) {
                console.log("Okay: All inputs are valid contact.");
                progressButton.prop('disabled', false);
                //nextButton.prop('disabled', false);
            } else {
                console.log("No: Some inputs are not valid contact.");
                progressButton.prop('disabled', true);
                //nextButton.prop('disabled', true);
            }
        }
        
        // Call the function initially
        checkButtonsValidity();
        function validateTextInput(inputId, maxLength, errorMessage) {
            const input = $("#" + inputId);
            let value = input.val().trim();
        
            // Truncate the input value if it exceeds the maximum length
            if (value.length > maxLength) {
                value = value.slice(0, maxLength);
                input.val(value); // Update the input value
            }
        
            // Remove numerical characters
            value = value.replace(/\d/g, '');
        
            // Check if the input value exceeds the maximum length
            const isOverMaxLength = value.length >= maxLength;
        
            const feedback = input.next(".invalid-feedback");
            if (isOverMaxLength) {
                feedback.text(`Only up to ${maxLength} characters allowed.`);
            } else if (!value) {
                feedback.text("This is a required input.");
            } else {
                feedback.text("");
            }
        
            // Add or remove the 'is-invalid' class based on input validity
            if (isOverMaxLength || !value) {
                input.addClass('is-invalid');
            } else {
                input.removeClass('is-invalid');
            }
        }

        // Add event listeners for validation and required input error
        $("#contact-firstname, #contact-lastname, #relationship, #contact-street").on('input', function() {
            validateTextInput($(this).attr('id'), 50, "");
            checkButtonsValidity();
        });

        // Add event listener for the "required input" error
        $("#contact-firstname, #contact-lastname, #relationship, #contact-street, #contact-bldg-no").on('blur', function() {
            const input = $(this);
            const feedback = input.next(".invalid-feedback");
            if (!input.val().trim()) {
                feedback.text("This is a required input.");
                input.addClass('is-invalid');
                checkButtonsValidity();
            }
        });
        $("#contact-firstname, #contact-lastname, #relationship, #contact-street").on('keydown', function(event) {
            if (/\d/.test(event.key)) {
                event.preventDefault();
            }
        });

        // Function to validate address input
        function validateAddressInput() {
            const addressInput = $("#contact-bldg-no");
            let value = addressInput.val().trim();

            // Truncate the input value if it exceeds the maximum length
            const maxLength = 150;
            if (value.length > maxLength) {
                value = value.slice(0, maxLength);
                addressInput.val(value); // Update the input value
            }

            // Check if the input value exceeds the maximum length
            const isOverMaxLength = value.length >= maxLength; 

            const feedback = addressInput.next(".invalid-feedback");
            if (isOverMaxLength) {
                feedback.text(`Only up to ${maxLength} characters allowed.`);
            } else {
                feedback.text("");
            }

            // Add or remove the 'is-invalid' class based on input validity
            if (isOverMaxLength) {
                addressInput.addClass('is-invalid');
            } else {
                addressInput.removeClass('is-invalid');
            }
        }

        // Add event listener to address input for validation
        $("#contact-bldg-no").on('input', function() {
            validateAddressInput();
            checkButtonsValidity();
        });

        const contactPersonForm = document.querySelector('.contact-form-panel')
        const requiredContactInputs = contactPersonForm.querySelectorAll('.req-inp')
        requiredContactInputs.forEach(input => {
            
            const feedback = input.nextElementSibling;
            input.addEventListener('change', () => {
                if (input.value.length <= 0) {
                  feedback.textContent = "This is a required input.";
                  input.classList.add('is-invalid');
                } else {
                  feedback.textContent = "";
                  input.classList.remove('is-invalid');
                }

            })
        })

        // Function to check if all inputs are valid and enable/disable buttons accordingly
        function checkInputsValidity() {
            const streetInputValue = $("#incident-street").val().trim();
            const descriptionInputValue = $("#incident-desc").val().trim();
            const isStreetValid = !$("#incident-street").hasClass('is-invalid') && streetInputValue !== "";
            const isDescriptionValid = !$("#incident-desc").hasClass('is-invalid') && descriptionInputValue !== "";

            const progressButton = $('button[title="Contact Person Information"]');
            const nextButton = $('.btn-next-contact-person');

            if (isStreetValid && isDescriptionValid) {
                console.log("Okay: All inputs are valid.");
                progressButton.prop('disabled', false);
                //nextButton.prop('disabled', false);
            } else {
                console.log("No: Some inputs are not valid.");
                progressButton.prop('disabled', true);
                //nextButton.prop('disabled', true);
            }
        }

        checkInputsValidity();

        const incidentForm = document.querySelector('.incident-form-panel')
        const requiredIncidentInputs = incidentForm.querySelectorAll('.req-inp')
        requiredIncidentInputs.forEach(input => {
            
            const feedback = input.nextElementSibling;
            input.addEventListener('change', () => {
                if (input.value.length <= 0) {
                  feedback.textContent = "This is a required input.";
                  input.classList.add('is-invalid');
                } else {
                  feedback.textContent = "";
                  input.classList.remove('is-invalid');
                }

            })
        })

        $("#incident-street, #incident-desc" ).on('input change', function() {
            checkInputsValidity();
        });
        // Function to validate the incident street input
        function validateIncidentStreet() {
            const streetInput = $("#incident-street");
            let value = streetInput.val().trim();

            // Truncate the input value if it exceeds the maximum length
            const maxLength = 50;
            if (value.length > maxLength) {
                value = value.slice(0, maxLength);
                streetInput.val(value); // Update the input value
            }

            // Check if the input value exceeds the maximum length
            const isOverMaxLength = value.length >= maxLength; // Change condition here

            // Check if the input contains numerical characters
            const hasNumerical = /\d/.test(value);

            const feedback = streetInput.next(".invalid-feedback");
            if (isOverMaxLength) {
                feedback.text(`Only up to ${maxLength} characters allowed.`);
            } else if (hasNumerical) {
                feedback.text("Street name cannot contain numerical characters.");
            } else if (!value) {
                feedback.text("Street is a required input.");
            } else {
                feedback.text("");
            }

            // Add or remove the 'is-invalid' class based on input validity
            if (isOverMaxLength || hasNumerical || !value) {
                streetInput.addClass('is-invalid');
            } else {
                streetInput.removeClass('is-invalid');
            }
        }

        // Add event listener to incident street input for validation
        $("#incident-street").on('input', validateIncidentStreet);
        // Prevent typing numerical characters in the incident street input
        $("#incident-street").on('keydown', function(event) {
            if (/\d/.test(event.key)) {
                event.preventDefault();
            }
        });

        // Function to validate the description of incident input
        function validateDescriptionInput() {
            const descriptionInput = $("#incident-desc");
            let value = descriptionInput.val().trim();

            // Truncate the input value if it exceeds the maximum length
            const maxLength = 150;
            if (value.length > maxLength) {
                value = value.slice(0, maxLength);
                descriptionInput.val(value); // Update the input value
            }

            // Check if the input value exceeds the maximum length
            const isOverMaxLength = value.length >= maxLength; // Change condition here

            // Check if the input is empty
            const isEmpty = value.length === 0;

            const feedback = descriptionInput.next(".invalid-feedback");
            if (isOverMaxLength) {
                feedback.text(`Only up to ${maxLength} characters allowed.`);
            }else if (isEmpty) {
                feedback.text("Description of incident is a required input.");
            } else {
                feedback.text("");
            }

            // Add or remove the 'is-invalid' class based on input validity
            if (isOverMaxLength || isEmpty) {
                descriptionInput.addClass('is-invalid');
            } else {
                descriptionInput.removeClass('is-invalid');
            }
        }

        // Add event listener to description of incident textarea for validation
        $("#incident-desc").on('input', validateDescriptionInput);

        // Function to validate the upload evidence input
        function validateUploadEvidence() {
            const evidenceInput = $("#incident-evidence");
            const files = evidenceInput[0].files;

            // Check if any file is uploaded and validate each file type
            let isValidFileType = true;
            for (let i = 0; i < files.length; i++) {
                if (!files[i].type.startsWith('image/')) {
                    isValidFileType = false;
                    break;
                }
            }
            const feedback = evidenceInput.next(".invalid-feedback");
            if (!isValidFileType) {
                feedback.text("Only images are allowed to be uploaded.");
                // Clear the uploaded files
                evidenceInput.val('');
            } else {
                feedback.text("");
            }
        }

        // Add event listener to upload evidence input for validation
        $("#incident-evidence").on('change', validateUploadEvidence);


        const form = document.querySelector("#impact-victim-form")

        form.addEventListener("click", function(e) {
            //e.preventDefault()

            if(e.target.classList.contains("delete-individual-form")) {

                const parentPage = e.target.closest(".multisteps-form__panel")
                const individualForm = parentPage.querySelectorAll(".individual-form")
                const word = individualForm[0].querySelector(".user_counter").textContent.split(" ")
                const victimNavtabsContainer = document.querySelector('#victim-navtabs-container')
                const perpNavtabsContainer = document.querySelector('#perpetrator-navtabs-container')
                
                if (individualForm.length  < 2) {
                    // showToast('error', `At least one {word[0]} form is required.`); 
                    showToast('error', "At least one " + word[0].toLowerCase() + " form is required."); 
                } else {

                    

                    e.target.closest(".individual-form").remove();
                    

                    const victimActiveTab = victimNavtabsContainer.querySelector(`[data-target='#${e.target.closest(".individual-form").id}']`)
                    const perpetratorActiveTab = perpNavtabsContainer.querySelector(`[data-target='#${e.target.closest(".individual-form").id}']`)

                    if(e.target.closest(".individual-form").classList.contains('victim-form')) {
                        victimCount--
                        if(victimActiveTab.nextElementSibling.classList.contains('nav-link')) {
                            victimActiveTab.nextElementSibling.click();
                        } else {
                            victimActiveTab.previousElementSibling.click();
                        }
                        victimActiveTab.remove();
                        recountVictims()
                    }
                    if(e.target.closest(".individual-form").classList.contains('perpetrator-form')) {
                        perpetratorCount--
                        if(perpetratorActiveTab.nextElementSibling.classList.contains('nav-link')) {
                            perpetratorActiveTab.nextElementSibling.click();
                        } else {
                            perpetratorActiveTab.previousElementSibling.click();
                        }
                        perpetratorActiveTab.remove();
                        recountPerpetrators()
                    }
                    
                    
                    
                    let counter = 1;
                    individualForm.forEach(function(element) {
                        //element.querySelector(".user_counter").innerHTML = word[0] + " " + counter

                        counter++
                    });
                }

            }
        })



        let goForSubmission = false
        // Intercept the form submission
        $('#impact-victim-form').submit(function(e) {
            e.preventDefault(); // Prevent the default form submission

            if (!goForSubmission) {
                // Show send email modal
                $('#sendEmail').modal('show');
            } else {
                // Submitting form to database

                // reseting count inputs to actual count.
                document.querySelector('#victim_count').value = victimCount
                document.querySelector('#perpetrator_count').value = perpetratorCount

                var formData = new FormData(this); // Create FormData object from the form
                $.ajax({
                    type: 'POST',
                    url: $(this).attr('action'), // Get the form's action attribute
                    data: formData, // Use FormData object for file uploads
                    contentType: false, // Prevent jQuery from automatically setting contentType
                    processData: false, // Prevent jQuery from automatically processing data
                    dataType: 'json', // Expect JSON response
                    success: function(response) {
                        if (response.success) {
                            $('#staticBackdrop').modal('show'); // Show the success modal
                        } else {
                            // Show error toast if response indicates failure
                            showToast('error', 'An error occurred. Please try again.');
                        }
                    },
                    error: function(xhr, textStatus, errorThrown) {
                        console.error('Error:', errorThrown);
                        // Show error toast if response indicates failure
                        showToast('error', 'An error occurred. Please try again.');
                    }
                });
            }

        });

        // email confirmation
        $('#contactConfirmationForm').submit(function(e) {
            e.preventDefault(); // Prevent the default form submission

            // Check if the input is email address
            var emailValue = $('#email-confirm').val();
            var phoneValue = $('#phone-confirm').val();
            let contactValue = ''

            // For example, you can log it to the console
            console.log("Email entered: " + emailValue);
            console.log("Phone entered: " + phoneValue);

            // Determine what url endpoint to use, either for email or phone
            requestURL = ''
            if(document.querySelector('#email-tab').classList.contains('active')) {
                console.log('email is selected type')
                requestURL = '{% url 'email_confirm'  %}'
                contactValue = isvalid_email(emailValue)
            } else if (document.querySelector('#phone-tab').classList.contains('active')) {
                console.log('phone number is selected type')
                requestURL = '{% url 'phone_confirm'  %}'
                contactValue = isvalid_phone_number(phoneValue)
            } else {
                throw new Error('No contact type selected')
            }

            // Check recaptcha if puzzle is solved
            const captchaRes = grecaptcha.getResponse()
            if(!captchaRes.length > 0) {
                $('.g-recaptcha').children().css('border', '1px solid red')
                $('.err-msg-recaptcha').text('You need to solve captcha first')
                throw new Error('reCAPTCHA validation failed')
            }

            $.ajax({
                url: requestURL, // Modify the URL to point to your Django view endpoint
                type: 'POST',
                data: { 'contactConfirm': contactValue, 'g-recaptcha-response': grecaptcha.getResponse() }, // Pass the email value in the data object
                headers: {
                    'X-CSRFToken': '{{ csrf_token }}' // Include the CSRF token using Django's template syntax
                },
                success: function(response) {
                    // Handle success response
                    console.log(response); // Log the response to the console
                    
                    // Server-side validation response
                    if (!response.success) {
                        if(get_contact_type() == 'email') {
                            $('#email-confirm').addClass('is-invalid')
                            $('.err-msg-email').text(response.message)
                        } else if (get_contact_type() == 'phone') {
                            $('#phone-confirm').addClass('is-invalid')
                            $('#phone-confirm').parent().addClass('is-invalid')
                            $('.err-msg-phone').text(response.message)
                        }
                        throw new Error(response.message)
                    }

                    setContactModalMessage()
                    // Hide the email modal
                    $('#sendEmail').modal('hide');

                    const userEmail = $('#email-confirm').val();
                    if (userEmail) {
                        // Hide part of the email
                        const hiddenEmail = userEmail.replace(/^(.)(.*)(@.*)$/, (match, p1, p2, p3) => {
                            return p1 + '*'.repeat(p2.length) + p3;
                        });

                        $('#hidden_email').text(hiddenEmail);
                    }

                    // Show the OTP modal
                    $('#otpModal').modal('show');
                },
                error: function(xhr, textStatus, errorThrown) {
                    console.error('Error:', errorThrown);
                    // Show error toast if response indicates failure
                    showToast('error', 'An error occurred. Please try again.');
                }
            });
        });

        $('#otp input').on('input', function () {
            const value = $(this).val();
            if (value && value.length === 1) {
                // Move to the next input if there's a next one
                $(this).next('input').focus();
            } else if (!value) {
                // Move to the previous input if backspacing
                $(this).prev('input').focus();
            }
        });

        $('#otp input').on('keydown', function (e) {
            if (e.key === 'Backspace' && !$(this).val()) {
                // Move to the previous input on backspace
                $(this).prev('input').focus();
            }
        });

        // otp checking
        $('#otpForm').submit(function(e) {
            e.preventDefault(); // Prevent the default form submission
            var formData = $(this).serialize();

            requestURL = ''
            if(document.querySelector('#email-tab').classList.contains('active')) {
                console.log('email is selected type')
                requestURL = '{% url 'verify_otp_email'  %}'
            } else if (document.querySelector('#phone-tab').classList.contains('active')) {
                console.log('phone number is selected type')
                requestURL = '{% url 'verify_otp_phone'  %}'
            } else {
                throw new Error('No contact type selected')
            }

            $.ajax({
                type: 'POST',
                url: requestURL,
                data: formData,
                success: function(response) {
                    if (response.success) {
                        $('#successMessage').text(response.message);
                        // hide otp modal
                        $('#otpModal').modal('hide');
                        var emailValue = $('#email-confirm').val();
                        var phoneValue = $('#phone-confirm').val();
                        console.log("Email entered(OTP): " + emailValue);
                        console.log("Phone entered(OTP): " + phoneValue);
                        $('#email-confirmed').val(emailValue);
                        $('#phone-confirmed').val(phoneValue);
                        goForSubmission = true

                        // to trigger button of main form
                        document.querySelector(".btn-form-submit").click()
                        // Log success message to the console
                        console.log('OTP verification successful.');
                    } else {
                        $('#otpErrorMessage').text(response.message);
                        if (response.message === 'OTP has expired.' || response.message === 'Incorrect OTP.') {
                            $('.text-danger').show(); // Show the error message div
                        }
                    }
                },
                error: function(xhr, errmsg, err) {
                    $('#otpErrorMessage').text('Error occurred. Please try again.');
                    // Log error message to the console
                    console.error('Error occurred during OTP verification:', errmsg);
                }
            });
        });

        // Prevent form submission when clicking the buttons inside the form
        $('#add-victim-form, #delete-victim-form, #add-perpetrator-form, #delete-perpetrator-form').click(function(e) {
            e.preventDefault(); // Prevent the default action
        });

        // Function to update the countdown timer
        function updateTimer(seconds) {
            $('#resendTimer').text(`Resend ${seconds}s`);
        }

        // Function to handle the resend action
        function resendOTP() {
            // Disable the resend button
            $('#resendButton').prop('disabled', true);
            // Hide the resend button
            $('#resendButton').hide();

            // Set the initial timer value
            let secondsRemaining = 30;
            updateTimer(secondsRemaining);

            // Start the countdown
            const timerInterval = setInterval(() => {
                secondsRemaining--;
                updateTimer(secondsRemaining);
                if (secondsRemaining === 0) {
                    // Enable the resend button and clear the timer
                    clearInterval(timerInterval);
                    $('#resendButton').prop('disabled', false);
                    $('#resendButton').show(); // Show the resend button
                    $('#resendTimer').text('');
                }
            }, 1000);

            // Send AJAX request to resend OTP
            $.ajax({
                type: 'POST',
                url: '{% url "resend_otp_email" %}',
                headers: { 'X-CSRFToken': '{{ csrf_token }}' }, // Include CSRF token in the headers
                success: function(response) {
                    // Handle success response if needed
                },
                error: function(xhr, errmsg, err) {
                    console.error('Error occurred during OTP resend:', errmsg);
                }
            });
        }
        // Client side validation
        function isvalid_phone_number(number) {
            console.log(typeof number)
            if(/^\d+$/.test(number) && number.length === 10) {
                console.log('Phone number isvalid')
                return number
            } else if (number.trim().length <= 0) {
                $('.err-msg-phone').text('Please enter your phone number')
                $('#phone-confirm').parent().addClass('is-invalid')
                throw new Error('No input detected')
            } else {
                console.log(number)
                $('.err-msg-phone').text('Invalid phone number')
                $('#phone-confirm').parent().addClass('is-invalid')
                throw new Error('Invalid phone number')
            }
        }
        function isvalid_email(email) {
            if(email.trim().length <= 0) {
                $('.err-msg-email').text('Please enter your email')
                $('#email-confirm').addClass('is-invalid')
                throw new Error('No input detected')
            } else {
                return email
            }
        }

        function get_contact_type() {
            if(document.querySelector('#email-tab').classList.contains('active')) {
                return 'email'
            } else if (document.querySelector('#phone-tab').classList.contains('active')) {
                return 'phone'
            } else {
                return false
            }
        }
        

        // Click event handler for the resend button
        $('#resendButton').click(function(event) {
            event.preventDefault();
            resendOTP();
        });

        // Prevent character inputs other than numbers in the phone input element
        $('#phone-confirm').on('input', function() {
            // Remove any non-numeric character
            $(this).val($(this).val().replace(/[^0-9]/g, ''));
        });

        // Get the current date
        var currentDate = new Date();

        // Format the date as YYYY-MM-DD for the input field
        var formattedDate = currentDate.toISOString().split('T')[0];

        // Set the value of the input field to the current date
        $('#date-latest-incident').val(formattedDate);
    });

    function err_captcha_reset() {
        $('.g-recaptcha').children().css('border', 'none')
        $('.err-msg-recaptcha').text('')
    }

    function recountVictims() {
        victimForms = document.querySelectorAll('.victim-form')
        victimForms.forEach((e, index) => {
            e.querySelector('#victim_counter').innerText = index + 1
        })
    }
    function recountPerpetrators() {
        perpetratorForms = document.querySelectorAll('.perpetrator-form')
        perpetratorForms.forEach((e, index) => {
            e.querySelector('#perpetrator_counter').innerText = index + 1
        })
    }


    document.querySelectorAll('[name="service"]').forEach(element => {
        element.addEventListener('change', () => {
            document.querySelector('.btn-form-submit').disabled = false
        })
    })

    function setContactModalMessage() {
        if(document.querySelector('#phone-tab').classList.contains('active')) {
          document.querySelector('#hidden_email').textContent = '09*******' + (document.querySelector('#phone-confirm').value.toString()).slice(-2)
      
        } else if (document.querySelector('#email-tab').classList.contains('active')) {
          email = document.querySelector('#email-confirm').value
          document.querySelector('#hidden_email').textContent = email[0] + '*****' + email.slice(-10)
        }
    }

</script>
{% endblock scripts %}